var Ge=Object.defineProperty,Ve=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var Ee=(e,t,n)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t)=>{for(var n in t||(t={}))Pe.call(t,n)&&Ee(e,n,t[n]);if(Ie)for(var n of Ie(t))ze.call(t,n)&&Ee(e,n,t[n]);return e},ie=(e,t)=>Ve(e,Ne(t));import{E as xe,a as He,b as je,c as Xe,d as Ye,e as Je,f as We,g as qe,h as Ke,i as Ze,j as Qe,k as et,l as tt,m as ot,n as nt,o as st,p as at,q as it,r as ut,s as lt,t as rt,u as dt,v as ct,w as pt,x as ft,y,z as S,A as Z,B as Q,C as $,D as ee,F as te,G as E,H as ue,I as d,J as m,K as g,L as _,M as oe,N as z,O as C,P as h,Q as N,R as x,S as A,T as w,U as O,V as gt,W as ne,X as i,Y as b,Z as J,_ as W,$ as ve,a0 as H,a1 as Ce,a2 as Fe,a3 as _t,a4 as mt,a5 as ht,a6 as It}from"./vendor.4e90bbcf.js";const Et=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}};Et();function vt(e){[xe,He,je,Xe,Ye,Je,We,qe,Ke,Ze,Qe,et,tt,ot,nt,st,at,it,ut,lt,rt,dt].forEach(t=>{e.use(t)})}const Ct="modulepreload",De={},Ft="./",Dt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${Ft}${o}`,o in De)return;De[o]=!0;const s=o.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":Ct,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((a,p)=>{u.addEventListener("load",a),u.addEventListener("error",p)})})).then(()=>t())},de="PICX_",se=`${de}CONFIG`,ce=`${de}UPLOADED`,pe=`${de}MANAGEMENT`,At=()=>{const e=localStorage.getItem(pe);return e?JSON.parse(e):[]},$t={state:{name:"dirImageListModule",dirImageList:At()},mutations:{},actions:{DIR_IMAGE_LIST_ADD_IMAGE({state:e,dispatch:t},n){const o=e.dirImageList.find(s=>s.dir===n.dir);o&&(o.imageList.push(n),t("DIR_IMAGE_LIST_PERSIST"))},DIR_IMAGE_LIST_ADD_IMAGE_LIST({state:e,dispatch:t},n){const o=e.dirImageList.find(s=>s.dir===n.dir);o?o.imageList=n.imageList:e.dirImageList.unshift(n),t("DIR_IMAGE_LIST_PERSIST")},DIR_IMAGE_LIST_ADD_DIR({state:e,dispatch:t},n){if(!e.dirImageList.some(o=>o.dir===n)){const o={dir:n,imageList:[]};n==="/"?e.dirImageList.unshift(o):e.dirImageList.push(o),t("DIR_IMAGE_LIST_PERSIST")}},DIR_IMAGE_LIST_REMOVE_DIR({state:e,dispatch:t},n){if(e.dirImageList.some(o=>o.dir===n)){const o=e.dirImageList.findIndex(s=>s.dir===n);e.dirImageList.splice(o,1),t("DIR_IMAGE_LIST_PERSIST")}},DIR_IMAGE_LIST_REMOVE({state:e,dispatch:t},n){if(e.dirImageList.length>0){const o=e.dirImageList.find(s=>s.dir===n.dir);if(o){const s=o.imageList.findIndex(l=>l.uuid===n.uuid);s!==-1&&(o.imageList.splice(s,1),o.imageList.length===0&&(t("DIR_IMAGE_LIST_REMOVE_DIR",o.dir),t("USER_CONFIG_INFO_REMOVE_DIR",o.dir)),t("DIR_IMAGE_LIST_PERSIST"))}}},DIR_IMAGE_LIST_PERSIST({state:e}){localStorage.setItem(pe,JSON.stringify(e.dirImageList))},DIR_IMAGE_LOGOUT({state:e}){e.dirImageList=[],localStorage.removeItem(pe)}},getters:{getDirImageList:e=>e.dirImageList}},bt={state:{curImgBase64Url:"",curImgUuid:"",list:[],uploadedNumber:0},actions:{TO_UPLOAD_IMAGE_LIST_ADD({state:e},t){e.list.unshift(t)},TO_UPLOAD_IMAGE_SET_CURRENT({state:e},{uuid:t,base64Url:n}){e.curImgUuid=t,e.curImgBase64Url=n},TO_UPLOAD_IMAGE_UPLOADED({state:e}){e.uploadedNumber+=1},TO_UPLOAD_IMAGE_LIST_REMOVE({state:e},t){if(e.list.length>0){const n=e.list.findIndex(o=>o.uuid===t);if(n!==-1&&e.list.splice(n,1),e.list.length===0)e.curImgBase64Url="",e.uploadedNumber=0;else if(e.curImgUuid===t){const o=e.list[0];e.curImgBase64Url=o.imgData.base64Url,e.curImgUuid=o.uuid}}},TO_UPLOAD_IMAGE_LIST_FAIL({state:e}){if(e.list.length>0){const t=e.list.filter(n=>n.uploadStatus.progress!==100);t.length>0&&(e.list=t,e.uploadedNumber=0,e.curImgBase64Url=t[0].imgData.base64Url)}},TO_UPLOAD_IMAGE_CLEAN_URL({state:e}){e.curImgBase64Url=""},TO_UPLOAD_IMAGE_CLEAN_LIST({state:e}){e.list=[]},TO_UPLOAD_IMAGE_CLEAN_UPLOADED_NUMBER({state:e}){e.uploadedNumber=0},TO_UPLOAD_IMAGE_LOGOUT({state:e}){e.curImgBase64Url="",e.list=[],e.uploadedNumber=0}},getters:{getToUploadImageList:e=>e.list,getToUploadImage:e=>e}},Lt=()=>{const e=sessionStorage.getItem(ce);return e?JSON.parse(e):[]},St={state:{uploadedImageList:Lt()},mutations:{},actions:{UPLOADED_LIST_ADD({state:e,dispatch:t},n){e.uploadedImageList.unshift(n),t("UPLOADED_LIST_PERSIST")},UPLOADED_LIST_REMOVE({state:e,dispatch:t},n){if(e.uploadedImageList.length>0){const o=e.uploadedImageList.findIndex(s=>s.uuid===n.uuid);o!==-1&&(e.uploadedImageList.splice(o,1),t("UPLOADED_LIST_PERSIST"))}},UPLOADED_LIST_PERSIST({state:e}){sessionStorage.setItem(ce,JSON.stringify(e.uploadedImageList))},UPLOADED_LIST_LOGOUT({state:e}){e.uploadedImageList=[],sessionStorage.removeItem(ce)}},getters:{getUploadedImageList:e=>e.uploadedImageList}};var X;(function(e){e.newBranch="newBranch",e.reposBranch="reposBranch"})(X||(X={}));const Ut=e=>{const t=Object.prototype.toString.call(e).split(" ")[1];return t.substring(0,t.length-1).toLowerCase()},Ae=e=>{for(const t in e)switch(Ut(e[t])){case"object":Ae(e[t]);break;case"string":e[t]="";break;case"array":e[t]=[];break;case"number":e[t]=0;break;case"boolean":e[t]=!1;break}};var G;(function(e){e.autoDir="autoDir",e.newDir="newDir",e.rootDir="rootDir",e.reposDir="reposDir"})(G||(G={}));class le{static zerofill(t){return t<10?`0${t}`:t}static getYyyyMmDd(t=Date.now()){const n=new Date(t),o=n.getFullYear(),s=n.getMonth()+1,l=n.getDate();return`${o}${this.zerofill(s)}${this.zerofill(l)}`}static formatTimestamp(t=Date.now()){const n=new Date(t),o=n.getFullYear(),s=n.getMonth()+1,l=n.getDate(),u=n.getHours(),a=n.getMinutes(),p=n.getSeconds();return`${o}-${this.zerofill(s)}-${this.zerofill(l)} ${this.zerofill(u)}:${this.zerofill(a)}:${this.zerofill(p)}`}}const kt=()=>{const e={token:"",owner:"",email:"",name:"",avatarUrl:"",selectedRepos:"",reposList:[],branchMode:X.reposBranch,selectedBranch:"",branchList:[],dirMode:G.reposDir,selectedDir:"",dirList:[],loggingStatus:!1,personalSetting:{defaultHash:!0,defaultMarkdown:!1}},t={token:window.atob("Z2hwX2hRZjc3dUNBb2t1cEY1WEVXODRGWlBGUnVMU3NjdDNnV3gydA=="),owner:"zjy2931",email:"479247526@qq.com",name:"\u5F20\u5EFA\u96E8",avatarUrl:"https://avatars.githubusercontent.com/u/20530687?v=4",selectedRepos:"my-img",reposList:[{value:"DEMO",label:"DEMO",desc:null},{value:"zjy2931.github.io",label:"zjy2931.github.io",desc:null},{value:"my-img",label:"my-img",desc:null},{value:"docs",label:"docs",desc:"zjy2931 blog"}],selectedBranch:"master",dirMode:"reposDir",selectedDir:"img",dirList:[{value:"/",label:"/"},{value:"20201216",label:"20201216"},{value:"docs",label:"docs"},{value:"img",label:"img"}],loggingStatus:!0};localStorage.setItem(se,JSON.stringify(t));const n=localStorage.getItem(se);if(n){const o=JSON.parse(n);for(const s in o)e[s]=o[s];return e.selectedBranch&&!e.branchList.length&&(e.branchList=[{value:e.selectedBranch,label:e.selectedBranch}]),e.dirMode===G.autoDir&&(e.selectedDir=le.getYyyyMmDd()),e}return e},yt={state:{userConfigInfo:kt()},actions:{SET_USER_CONFIG_INFO({state:e},t){for(const n in t)e.userConfigInfo.hasOwnProperty(n)&&(e.userConfigInfo[n]=t[n])},USER_CONFIG_INFO_ADD_DIR({state:e,dispatch:t},n){e.userConfigInfo.dirList.some(o=>o.value===n)||(e.userConfigInfo.dirList.push({label:n,value:n}),t("USER_CONFIG_INFO_PERSIST"))},USER_CONFIG_INFO_REMOVE_DIR({state:e,dispatch:t},n){const{dirList:o}=e.userConfigInfo;if(o.some(s=>s.value===n)){const s=o.findIndex(l=>l.value===n);o.splice(s,1),t("USER_CONFIG_INFO_PERSIST")}},USER_CONFIG_INFO_PERSIST({state:e}){e.userConfigInfo.selectedDir=e.userConfigInfo.selectedDir.replace(/\s+/g,"-"),e.userConfigInfo.selectedBranch=e.userConfigInfo.selectedBranch.replace(/\s+/g,"-"),localStorage.setItem(se,JSON.stringify(e.userConfigInfo))},USER_CONFIG_INFO_LOGOUT({state:e}){Ae(e.userConfigInfo),localStorage.removeItem(se)}},getters:{getUserLoggingStatus:e=>e.userConfigInfo.loggingStatus,getUserConfigInfo:e=>e.userConfigInfo}},wt={state:{imageViewer:{imgInfo:null,isShow:!1}},mutations:{IMAGE_VIEWER(e,{imgInfo:t,isShow:n}){e.imageViewer.imgInfo=t,e.imageViewer.isShow=n},IMAGE_VIEWER_LOGOUT(e){e.imageViewer.isShow=!1,e.imageViewer.imgInfo=null}},actions:{},getters:{getImageViewer:e=>e.imageViewer}},Bt={state:{uploadAreaActive:!1},mutations:{CHANGE_UPLOAD_AREA_ACTIVE(e,t){e.uploadAreaActive=t},UPLOAD_AREA_ACTIVE_LOGOUT(e){e.uploadAreaActive=!1}},actions:{},getters:{getUploadAreaActive:e=>e.uploadAreaActive}},Mt={state:{uploadSettings:{isSetMaxSize:!0,imageMaxSize:30*1024}},mutations:{UPLOAD_SETTINGS_LOGOUT(e){e.uploadSettings.isSetMaxSize=!0,e.uploadSettings.imageMaxSize=50*1024}},actions:{},getters:{getUploadSettings:e=>e.uploadSettings}},re=ct({modules:{dirImageListModule:$t,toUploadImageModule:bt,uploadedImageListModule:St,userConfigInfoModule:yt,imageViewerModule:wt,uploadAreaActiveModule:Bt,uploadSettingsModule:Mt},state:{rootName:"root"},mutations:{},actions:{LOGOUT({dispatch:e,commit:t}){e("DIR_IMAGE_LOGOUT"),e("TO_UPLOAD_IMAGE_LOGOUT"),e("UPLOADED_LIST_LOGOUT"),e("USER_CONFIG_INFO_LOGOUT"),t("IMAGE_VIEWER_LOGOUT"),t("UPLOAD_AREA_ACTIVE_LOGOUT"),t("UPLOAD_SETTINGS_LOGOUT")}},getters:{}}),$e=Symbol("vue-store");function V(){return pt($e)}const Ot="https://api.github.com",R=ft.create({baseURL:Ot,timeout:3e5});R.defaults.headers["Content-Type"]="application/json";R.interceptors.request.use(e=>{const t=localStorage.getItem(se);return t&&(e.headers.Authorization=`token ${JSON.parse(t).token}`),e},e=>Promise.reject(e));R.interceptors.response.use(e=>e,e=>{if(e.response&&e.response.data){const t=e.response.status,n=e.response.data.message;y.error(`Code: ${t}, Message: ${n}`),console.error("[PicX Error]",e.response)}else y.error(`${e}`);return e.response});var U=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const Rt=S({name:"config",setup(){const e=Z(),t=V(),n=Q({userConfigInfo:$(()=>t.getters.getUserConfigInfo).value,loggingStatus:$(()=>t.getters.getUserConfigInfo).value,loading:!1,dirLoading:!1,branchLoading:!1,getUserInfo(){this.userConfigInfo.token?(this.loading=!0,R.defaults.headers.Authorization=`token ${this.userConfigInfo.token}`,R.get("/user").then(c=>{console.log("[getUserInfo] ",c),c&&c.status===200?(this.saveUserInfo(c),this.getReposList(c.data.repos_url)):this.loading=!1})):y.warning("Token \u4E0D\u80FD\u4E3A\u7A7A\uFF01")},saveUserInfo(c){this.userConfigInfo.loggingStatus=!0,this.userConfigInfo.owner=c.data.login,this.userConfigInfo.name=c.data.name,this.userConfigInfo.email=c.data.email,this.userConfigInfo.avatarUrl=c.data.avatar_url,this.persistUserConfigInfo()},getReposList(c){R.get(c,{params:{type:"public",sort:"created",per_page:100}}).then(f=>{if(console.log("[getReposList] ",f),f.status===200&&f.data.length>0){this.userConfigInfo.reposList=[];for(const r of f.data)!r.fork&&!r.private&&this.userConfigInfo.reposList.push({value:r.name,label:r.name,desc:r.description});this.loading=!1,this.persistUserConfigInfo()}})},innerSelectRepos(c){this.userConfigInfo.branchList=[],this.userConfigInfo.dirList=[],n.getBranchList(c),n.persistUserConfigInfo()},getBranchList(c){this.branchLoading=!0,R.get(`/repos/${this.userConfigInfo.owner}/${c}/branches`).then(f=>{if(console.log("[getBranchList] ",f),f&&f.status===200){if(this.branchLoading=!1,f.data.length>0){for(const r of f.data)this.userConfigInfo.branchList.push({value:r.name,label:r.name});this.userConfigInfo.selectedBranch=this.userConfigInfo.branchList[0].value,this.userConfigInfo.branchMode=X.reposBranch,this.getDirList(this.userConfigInfo.selectedBranch)}else this.userConfigInfo.selectedBranch="master",this.userConfigInfo.branchMode=X.newBranch;this.innerDirModeChange(this.userConfigInfo.dirMode),this.persistUserConfigInfo()}})},innerSelectBranch(c){n.getDirList(c),n.persistUserConfigInfo()},getDirList(c){this.dirLoading=!0,R.get(`/repos/${this.userConfigInfo.owner}/${this.userConfigInfo.selectedRepos}/contents`,{params:{ref:c}}).then(f=>{if(console.log("[getDirList] ",f),f&&f.status===200&&f.data.length>0){this.userConfigInfo.dirList=[{value:"/",label:"/"}];for(const r of f.data)r.type==="dir"&&this.userConfigInfo.dirList.push({value:r.name,label:r.name});this.persistUserConfigInfo()}this.dirLoading=!1})},innerBranchModeChange(c){const f=this.userConfigInfo.selectedBranch,r=this.userConfigInfo.branchList[0].value;switch(c){case X.newBranch:this.userConfigInfo.selectedBranch="xxx",this.userConfigInfo.dirMode=G.newDir,this.userConfigInfo.selectedDir="xxx";break;case X.reposBranch:f!==r&&(this.userConfigInfo.selectedBranch=r,this.getDirList(r));break;default:this.userConfigInfo.selectedBranch="";break}this.persistUserConfigInfo()},innerDirModeChange(c){switch(c){case G.rootDir:this.userConfigInfo.selectedDir="/";break;case G.autoDir:this.userConfigInfo.selectedDir=le.getYyyyMmDd();break;case G.newDir:this.userConfigInfo.selectedDir="xxx";break;case G.reposDir:const{dirList:f}=this.userConfigInfo;f.length?this.userConfigInfo.selectedDir=f[0].value:this.userConfigInfo.selectedDir="";break;default:this.userConfigInfo.selectedDir="/";break}this.persistUserConfigInfo()},persistUserConfigInfo(){t.dispatch("USER_CONFIG_INFO_PERSIST")},reset(){this.loading=!1,this.dirLoading=!1,t.dispatch("LOGOUT")},innerGoUpload(){const{selectedDir:c,dirMode:f}=this.userConfigInfo;let r="\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A\uFF01";if(c===""){switch(f){case G.newDir:r="\u8BF7\u5728\u8F93\u5165\u6846\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55\uFF01";break;case G.reposDir:r=`\u8BF7\u9009\u62E9 ${this.userConfigInfo.selectedRepos} \u4ED3\u5E93\u4E0B\u7684\u4E00\u4E2A\u76EE\u5F55\uFF01`;break;default:r="\u8BF7\u5728\u8F93\u5165\u6846\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55\uFF01";break}y.warning(r)}else e.push("/upload")}}),o=c=>{n.innerSelectRepos(c)},s=c=>{n.innerSelectBranch(c)},l=c=>{n.innerDirModeChange(c)},u=c=>{n.innerBranchModeChange(c)},a=()=>{n.innerGoUpload()},p=()=>{};return ee(()=>n.loggingStatus,c=>{c||(n.loading=!1,n.dirLoading=!1)}),ie(Y({},te(n)),{branchModeChange:u,dirModeChange:l,selectRepos:o,selectBranch:s,createBranch:p,goUpload:a})}}),Tt={class:"page-container config-page-container"},Gt=A(" \u786E\u8BA4 Token ");const Vt=A("\u65B0\u5EFA\u76EE\u5F55"),Nt=A("\u6839\u76EE\u5F55"),Pt=A("\u81EA\u52A8\u76EE\u5F55"),zt=A(" \u91CD\u7F6E "),xt=A(" \u5B8C\u6210\u914D\u7F6E ");function Ht(e,t,n,o,s,l){const u=E("el-input"),a=E("el-form-item"),p=E("el-button"),c=E("el-form"),f=E("el-option"),r=E("el-select"),L=E("el-radio"),F=E("el-tooltip"),M=E("el-radio-group"),T=ue("loading");return d(),m("div",Tt,[g(c,{"label-width":"70px","label-position":"right",class:"config-form"},{default:_(()=>[g(a,{label:"Token"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.token,"onUpdate:modelValue":t[0]||(t[0]=I=>e.userConfigInfo.token=I),clearable:"",autofocus:!e.userConfigInfo.token},null,8,["modelValue","autofocus"])]),_:1}),g(a,{class:"operation"},{default:_(()=>[g(p,{plain:"",size:"small",type:"primary","native-type":"submit",onClick:t[1]||(t[1]=oe(I=>e.getUserInfo(),["prevent"]))},{default:_(()=>[Gt]),_:1})]),_:1})]),_:1}),e.userConfigInfo.token?z((d(),C(c,{key:0,"label-width":"70px","label-position":"right","element-loading-text":"\u52A0\u8F7D\u4E2D..."},{default:_(()=>[e.userConfigInfo.owner?(d(),C(a,{key:0,label:"\u7528\u6237\u540D"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.owner,"onUpdate:modelValue":t[2]||(t[2]=I=>e.userConfigInfo.owner=I),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),e.userConfigInfo.email?(d(),C(a,{key:1,label:"\u90AE\u7BB1"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.email,"onUpdate:modelValue":t[3]||(t[3]=I=>e.userConfigInfo.email=I),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),e.userConfigInfo.reposList.length?(d(),C(a,{key:2,label:"\u9009\u62E9\u4ED3\u5E93"},{default:_(()=>[g(r,{modelValue:e.userConfigInfo.selectedRepos,"onUpdate:modelValue":t[4]||(t[4]=I=>e.userConfigInfo.selectedRepos=I),filterable:"",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u56FE\u5E8A\u4ED3\u5E93...",onChange:e.selectRepos},{default:_(()=>[(d(!0),m(N,null,x(e.userConfigInfo.reposList,(I,v)=>(d(),C(f,{key:v,label:I.label,value:I.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})):h("",!0)]),_:1})),[[T,e.loading]]):h("",!0),e.userConfigInfo.selectedRepos&&e.userConfigInfo.branchList.length?z((d(),C(c,{key:1,"label-width":"70px","label-position":"right","element-loading-text":"\u52A0\u8F7D\u4E2D..."},{default:_(()=>[(e.userConfigInfo.selectedRepos,h("",!0)),e.userConfigInfo.branchList.length>1&&e.userConfigInfo.branchMode==="reposBranch"?(d(),C(a,{key:1,label:"\u9009\u62E9\u5206\u652F"},{default:_(()=>[g(r,{modelValue:e.userConfigInfo.selectedBranch,"onUpdate:modelValue":t[6]||(t[6]=I=>e.userConfigInfo.selectedBranch=I),filterable:"",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5206\u652F...",onChange:e.selectBranch},{default:_(()=>[(d(!0),m(N,null,x(e.userConfigInfo.branchList,(I,v)=>(d(),C(f,{key:v,label:I.label,value:I.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})):h("",!0),e.userConfigInfo.branchMode==="newBranch"?(d(),C(a,{key:2,label:"\u65B0\u5EFA\u5206\u652F"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.selectedBranch,"onUpdate:modelValue":t[7]||(t[7]=I=>e.userConfigInfo.selectedBranch=I),onInput:t[8]||(t[8]=I=>e.persistUserConfigInfo()),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5EFA\u7684\u5206\u652F..."},null,8,["modelValue"])]),_:1})):h("",!0)]),_:1})),[[T,e.branchLoading]]):h("",!0),e.userConfigInfo.selectedBranch?z((d(),C(c,{key:2,"label-width":"70px","label-position":"right","element-loading-text":"\u52A0\u8F7D\u4E2D..."},{default:_(()=>[e.userConfigInfo.selectedBranch?(d(),C(a,{key:0,label:"\u76EE\u5F55\u65B9\u5F0F"},{default:_(()=>[g(M,{modelValue:e.userConfigInfo.dirMode,"onUpdate:modelValue":t[9]||(t[9]=I=>e.userConfigInfo.dirMode=I),onChange:e.dirModeChange},{default:_(()=>[g(F,{content:"\u624B\u52A8\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55",placement:"top",offset:-1},{default:_(()=>[g(L,{label:"newDir"},{default:_(()=>[Vt]),_:1})]),_:1}),g(F,{content:"\u56FE\u7247\u5B58\u50A8\u5728 "+e.userConfigInfo.selectedBranch+" \u5206\u652F\u7684\u6839\u76EE\u5F55\u4E0B",placement:"top",offset:-1},{default:_(()=>[g(L,{label:"rootDir"},{default:_(()=>[Nt]),_:1})]),_:1},8,["content"]),g(F,{content:"\u6839\u636E\u65E5\u671F\u81EA\u52A8\u521B\u5EFA\u683C\u5F0F YYYYMMDD \u7684\u76EE\u5F55",placement:"top",offset:-1},{default:_(()=>[g(L,{label:"autoDir"},{default:_(()=>[Pt]),_:1})]),_:1}),e.userConfigInfo.dirList.length&&e.userConfigInfo.branchMode!=="newBranch"?(d(),C(F,{key:0,content:"\u9009\u62E9 "+e.userConfigInfo.selectedBranch+" \u5206\u652F\u4E0B\u7684\u4E00\u4E2A\u76EE\u5F55",placement:"top",offset:-1},{default:_(()=>[g(L,{label:"reposDir"},{default:_(()=>[A(" \u9009\u62E9 "+w(e.userConfigInfo.selectedRepos)+" \u4ED3\u5E93\u76EE\u5F55 ",1)]),_:1})]),_:1},8,["content"])):h("",!0)]),_:1},8,["modelValue","onChange"])]),_:1})):h("",!0),e.userConfigInfo.dirMode==="autoDir"?(d(),C(a,{key:1,label:"\u81EA\u52A8\u76EE\u5F55"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[10]||(t[10]=I=>e.userConfigInfo.selectedDir=I),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),e.userConfigInfo.dirMode==="rootDir"?(d(),C(a,{key:2,label:"\u6839\u76EE\u5F55"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[11]||(t[11]=I=>e.userConfigInfo.selectedDir=I),readonly:""},null,8,["modelValue"])]),_:1})):h("",!0),e.userConfigInfo.dirMode==="newDir"?(d(),C(a,{key:3,label:"\u65B0\u5EFA\u76EE\u5F55"},{default:_(()=>[g(u,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[12]||(t[12]=I=>e.userConfigInfo.selectedDir=I),onInput:t[13]||(t[13]=I=>e.persistUserConfigInfo()),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5EFA\u7684\u76EE\u5F55..."},null,8,["modelValue"])]),_:1})):h("",!0),e.userConfigInfo.dirList.length&&e.userConfigInfo.dirMode==="reposDir"&&e.userConfigInfo.branchMode!=="newBranch"?(d(),C(a,{key:4,label:"\u9009\u62E9\u76EE\u5F55"},{default:_(()=>[g(r,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[14]||(t[14]=I=>e.userConfigInfo.selectedDir=I),filterable:"",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u76EE\u5F55...",onChange:e.persistUserConfigInfo},{default:_(()=>[(d(!0),m(N,null,x(e.userConfigInfo.dirList,I=>(d(),C(f,{key:I.value,label:I.label,value:I.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})):h("",!0)]),_:1})),[[T,e.dirLoading]]):h("",!0),g(c,{"label-width":"70px"},{default:_(()=>[g(a,{class:"operation"},{default:_(()=>[e.userConfigInfo.owner?(d(),C(p,{key:0,plain:"",size:"small",onClick:t[15]||(t[15]=I=>e.reset())},{default:_(()=>[zt]),_:1})):h("",!0),e.userConfigInfo.selectedRepos?(d(),C(p,{key:1,plain:"",size:"small",type:"success",onClick:e.goUpload},{default:_(()=>[xt]),_:1},8,["onClick"])):h("",!0)]),_:1})]),_:1})])}var jt=U(Rt,[["render",Ht],["__scopeId","data-v-317c79ee"]]),k;(function(e){e.gh="gh",e.md_gh="md_gh",e.cdn="cdn",e.md_cdn="md_cdn"})(k||(k={}));const be=e=>(J("data-v-5ede541f"),e=e(),W(),e),Xt={class:"copy-external-link-box"},Yt={key:0,t:"1631782798077",class:"markdown-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2861",width:"26",height:"26"},Jt=be(()=>i("path",{d:"M92 192C42.24 192 0 232.128 0 282.016v459.968C0 791.904 42.24 832 92 832h840C981.76 832 1024 791.872 1024 741.984V282.016C1024 232.16 981.76 192 932 192z m0 64h840c16.512 0 28 12.256 28 26.016v459.968c0 13.76-11.52 26.016-28 26.016H92C75.488 768 64 755.744 64 741.984V282.016c0-13.76 11.52-25.984 28-25.984zM160 352v320h96v-212.992l96 127.008 96-127.04V672h96V352h-96l-96 128-96-128z m544 0v160h-96l144 160 144-160h-96v-160z","p-id":"2862",fill:"#808080"},null,-1)),Wt=[Jt],qt={key:1,t:"1631784688556",class:"markdown-icon",viewBox:"0 0 1280 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3242",width:"26",height:"26"},Kt=be(()=>i("path",{d:"M1187.6 118.2H92.4C41.4 118.2 0 159.6 0 210.4v603c0 51 41.4 92.4 92.4 92.4h1095.4c51 0 92.4-41.4 92.2-92.2V210.4c0-50.8-41.4-92.2-92.4-92.2zM677 721.2H554v-240l-123 153.8-123-153.8v240H184.6V302.8h123l123 153.8 123-153.8h123v418.4z m270.6 6.2L763 512H886V302.8h123V512H1132z","p-id":"3243",fill:"#3c3c3c"},null,-1)),Zt=[Kt],Qt={class:"btn-box"},eo=S({props:{imgObj:{type:Object,default:()=>{}}},setup(e){const t=e,n=$(()=>re.getters.getUserConfigInfo),o=O(t.imgObj),s=k;function l(u){let a="",p="";const c=o.value.is_transform_md;switch(u){case k.gh:c?(a=o.value.md_gh_url,p="Markdown \u683C\u5F0F\u7684 GitHub"):(a=o.value.github_url,p="GitHub");break;case k.cdn:c?(a=o.value.md_cdn_url,p="Markdown \u683C\u5F0F\u7684 CDN"):(a=o.value.cdn_url,p="CDN");break}let f=document.querySelector(".temp-external-link");f||(f=document.createElement("textarea"),f.setAttribute("class","temp-external-link"),f.style.position="absolute",f.style.top="-99999px",f.style.left="-99999px",document.body.appendChild(f)),f.value=a,f.select(),document.execCommand("copy"),y.success(`${p} \u5916\u94FE\u590D\u5236\u6210\u529F\uFF01`)}return gt(()=>{o.value=t.imgObj}),ne(()=>{o.value.is_transform_md=n.value.personalSetting.defaultMarkdown}),(u,a)=>{const p=E("el-tooltip");return d(),m("div",Xt,[i("div",null,[g(p,{content:o.value.is_transform_md?"\u70B9\u51FB\u8F6C\u6362\u666E\u901A\u5916\u94FE":"\u70B9\u51FB\u8F6C\u6362 Markdown \u683C\u5F0F\u5916\u94FE",placement:"top"},{default:_(()=>[i("div",{class:"markdown-icon-box flex-center",onClick:a[0]||(a[0]=c=>o.value.is_transform_md=!o.value.is_transform_md)},[o.value.is_transform_md?h("",!0):(d(),m("svg",Yt,Wt)),o.value.is_transform_md?(d(),m("svg",qt,Zt)):h("",!0)])]),_:1},8,["content"])]),i("div",Qt,[g(p,{content:"\u70B9\u51FB\u590D\u5236 GitHub \u5916\u94FE",placement:"top"},{default:_(()=>[i("span",{class:"btn-item copy-url github flex-center",onClick:a[1]||(a[1]=c=>l(b(s).gh))}," GitHub ")]),_:1}),g(p,{content:"\u70B9\u51FB\u590D\u5236 CDN \u5916\u94FE",placement:"top"},{default:_(()=>[i("span",{class:"btn-item copy-url cdn flex-center",onClick:a[2]||(a[2]=c=>l(b(s).cdn))}," CDN ")]),_:1})])])}}});var Le=U(eo,[["__scopeId","data-v-5ede541f"]]);const Se=e=>(J("data-v-08758406"),e=e(),W(),e),to={class:"image-box"},oo=["src"],no={class:"info-box"},so={class:"image-info"},ao={class:"filename"},io={class:"image-operation"},uo={class:"operation-box"},lo=Se(()=>i("i",{class:"el-icon-full-screen"},null,-1)),ro=[lo],co=Se(()=>i("i",{class:"el-icon-delete"},null,-1)),po=[co],fo=S({props:{listing:{type:Boolean,default:!1},imageObj:{type:Object,default:()=>{}},isUploaded:{type:Boolean,default:!1}},setup(e){const t=V(),n=$(()=>t.getters.getUserConfigInfo),o=O(!1),s=a=>{a.deleting=!0;const{owner:p,selectedRepos:c}=n.value;R.delete(`/repos/${p}/${c}/contents/${a.path}`,{data:{owner:p,repo:c,path:a.path,message:"delete picture via PicX(https://github.com/XPoet/picx)",sha:a.sha}}).then(f=>{console.log("[deleteImage] ",f),f&&f.status===200?(a.deleting=!1,y.success("\u5220\u9664\u6210\u529F\uFF01"),t.dispatch("UPLOADED_LIST_REMOVE",a),t.dispatch("DIR_IMAGE_LIST_REMOVE",a)):a.deleting=!1})},l=a=>{Ce.confirm(`\u6B64\u64CD\u4F5C\u5C06\u4F1A\u6C38\u4E45\u5220\u9664\u56FE\u7247 ${a.name} \uFF1F`,"\u5220\u9664\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",iconClass:"el-icon-warning"}).then(()=>{s(a)}).catch(()=>{console.log("\u53D6\u6D88\u5220\u9664")})},u=a=>{t.commit("IMAGE_VIEWER",{isShow:!0,imgInfo:{name:a.name,size:a.size,lastModified:a.lastModified,url:a.cdn_url}})};return(a,p)=>{const c=E("el-tooltip"),f=ue("loading");return z((d(),m("div",{class:H(["image-card",{listing:e.listing}]),"element-loading-text":"\u5220\u9664\u4E2D...","element-loading-background":"rgba(0, 0, 0, 0.6)",onMouseenter:p[3]||(p[3]=r=>o.value=!0),onMouseleave:p[4]||(p[4]=r=>o.value=!1)},[i("div",to,[i("img",{src:e.imageObj.cdn_url,onClick:p[0]||(p[0]=r=>u(e.imageObj))},null,8,oo)]),i("div",no,[i("div",so,[i("div",ao,w(e.imageObj.name),1),i("div",io,[g(Le,{"img-obj":e.imageObj},null,8,["img-obj"])])])]),z(i("div",uo,[g(c,{content:"\u67E5\u770B\u5927\u56FE",placement:"top"},{default:_(()=>[i("div",{class:"btn",onClick:p[1]||(p[1]=r=>u(e.imageObj))},ro)]),_:1}),g(c,{content:"\u5220\u9664\u56FE\u7247",placement:"top"},{default:_(()=>[i("div",{class:"btn",onClick:p[2]||(p[2]=r=>l(e.imageObj))},po)]),_:1})],512),[[ve,o.value]])],34)),[[f,e.imageObj.deleting]])}}});var Ue=U(fo,[["__scopeId","data-v-08758406"]]);const ke=()=>Number(Math.random().toString().substr(2,5)+Date.now()).toString(36),fe=e=>{const t=e.lastIndexOf("."),n=e.substr(0,t).trim().replace(/\s+/g,"-"),o=e.substr(t+1,e.length);return{name:n,hash:ke(),suffix:o}},ye=e=>{const t=e.indexOf(".");return e.substr(0,t)},ge=e=>/(png|jpg|gif|jpeg|webp|svg\+xml|image\/x-icon)$/.test(e),_e=e=>Number((e/1024).toFixed(2));var P;(function(e){e.uploaded="uploaded",e.allUploaded="allUploaded",e.uploadFail="uploadFail"})(P||(P={}));const go=(e,t)=>{let n="";return e.selectedDir!=="/"&&(n=`${e.selectedDir}/`),`/repos/${e.owner}/${e.selectedRepos}/contents/${n}${t}`},j=(e,t,n)=>{const o=`https://cdn.jsdelivr.net/gh/${n.owner}/${n.selectedRepos}@${n.selectedBranch}/${t.path}`,s=decodeURI(t.download_url);switch(e){case k.gh:return s;case k.md_gh:return`![${ye(t.name)}](${s})`;case k.cdn:return o;case k.md_cdn:return`![${ye(t.name)}](${o})`}};const _o=S({name:"selected-info-bar",setup(e,t){const n=V();return{userConfigInfo:$(()=>n.getters.getUserConfigInfo),dirChange:l=>{n.dispatch("USER_CONFIG_INFO_PERSIST"),t.emit("selected-dir-change",l)}}}}),mo={key:0,class:"selected-info-bar-box"},ho={class:"info-item"},Io=A(" \u4ED3\u5E93\uFF1A"),Eo={key:0,class:"info-item"},vo=A(" \u5206\u652F\uFF1A"),Co={key:1,class:"info-item"},Fo=A(" \u76EE\u5F55\uFF1A ");function Do(e,t,n,o,s,l){const u=E("el-tag"),a=E("el-option"),p=E("el-select");return e.userConfigInfo.selectedRepos?(d(),m("div",mo,[i("span",ho,[Io,g(u,{size:"mini"},{default:_(()=>[A(w(e.userConfigInfo.selectedRepos),1)]),_:1})]),e.userConfigInfo.selectedBranch?(d(),m("span",Eo,[vo,g(u,{size:"mini"},{default:_(()=>[A(w(e.userConfigInfo.selectedBranch),1)]),_:1})])):h("",!0),e.userConfigInfo.selectedDir?(d(),m("span",Co,[Fo,g(p,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[0]||(t[0]=c=>e.userConfigInfo.selectedDir=c),placeholder:"\u8BF7\u9009\u62E9",size:"mini",onChange:e.dirChange},{default:_(()=>[(d(!0),m(N,null,x(e.userConfigInfo.dirList,(c,f)=>(d(),C(a,{key:f,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])):h("",!0)])):h("",!0)}var we=U(_o,[["render",Do],["__scopeId","data-v-4c456afe"]]);const Ao=S({name:"to-upload-image-card",components:{copyExternalLink:Le,selectedInfoBar:we},props:{loadingAllImage:{type:Boolean,default:!1}},setup(){const e=V(),t=Q({isShowDialog:!1,curImgInfo:{size:""},userConfigInfo:$(()=>e.getters.getUserConfigInfo).value,toUploadImage:$(()=>e.getters.getToUploadImage).value,hashRename(o,s){o?s.filename.now=`${s.filename.name}.${s.filename.hash}.${s.filename.suffix}`:s.filename.now=`${s.filename.name}.${s.filename.suffix}`},rename(o,s){o?s.filename.name=s.filename.newName.trim().replace(/\s+/g,"-"):s.filename.name=s.filename.initName,s.filename.isHashRename?s.filename.now=`${s.filename.name}.${s.filename.hash}.${s.filename.suffix}`:s.filename.now=`${s.filename.name}.${s.filename.suffix}`},getFileSize(o){return`${_e(o)} KB`},formatLastModified(o){return le.formatTimestamp(o)},async uploadImage_all(o){const s=this.toUploadImage.uploadedNumber;return s>=this.toUploadImage.list.length?P.uploaded:await this.uploadImage_single(o,this.toUploadImage.list[s])===!0?s<this.toUploadImage.list.length?(await this.uploadImage_all(o),P.allUploaded):P.uploaded:P.uploadFail},uploadImage_single(o,s){const{selectedBranch:l,email:u,owner:a}=o;s.uploadStatus.uploading=!0;const p={message:"Upload pictures via PicX(https://github.com/XPoet/picx)",branch:l,content:s.imgData.base64Content};return u&&(p.committer={name:a,email:u}),new Promise((c,f)=>{R.put(go(o,s.filename.now),p).then(r=>{r&&r.status===201?(this.uploadedHandle(r,s,o),e.dispatch("TO_UPLOAD_IMAGE_UPLOADED",s.uuid),c(!0),y.success("\u4E0A\u4F20\u6210\u529F\uFF01")):(s.uploadStatus.uploading=!1,c(!1),y.error("\u4E0A\u4F20\u5931\u8D25\uFF01"))}).catch(r=>{f(r)})})},uploadedHandle(o,s,l){s.uploadStatus.progress=100,s.uploadStatus.uploading=!1,s.externalLink.github=j(k.gh,o.data.content,l),s.externalLink.cdn=j(k.cdn,o.data.content,l),s.externalLink.markdown_gh=j(k.md_gh,o.data.content,l),s.externalLink.markdown_cdn=j(k.md_cdn,o.data.content,l);const u={uuid:s.uuid,dir:l.selectedDir,name:o.data.content.name,path:o.data.content.path,sha:o.data.content.sha,github_url:s.externalLink.github,cdn_url:s.externalLink.cdn,md_gh_url:s.externalLink.markdown_gh,md_cdn_url:s.externalLink.markdown_cdn,is_transform_md:l.personalSetting.defaultMarkdown,deleting:!1,size:s.fileInfo.size,lastModified:s.fileInfo.lastModified};s.uploadedImg=u,l.dirList.some(a=>a.value===u.dir)||(e.dispatch("USER_CONFIG_INFO_ADD_DIR",u.dir),e.dispatch("DIR_IMAGE_LIST_ADD_DIR",u.dir)),e.dispatch("UPLOADED_LIST_ADD",u),e.dispatch("DIR_IMAGE_LIST_ADD_IMAGE",u)},imageViewer(o){e.commit("IMAGE_VIEWER",{isShow:!0,imgInfo:{name:o.filename.now,size:o.fileInfo.size,lastModified:o.fileInfo.lastModified,url:o.imgData.base64Url}})}}),n=o=>{e.dispatch("TO_UPLOAD_IMAGE_LIST_REMOVE",o.uuid)};return ne(()=>{const o=t.userConfigInfo.personalSetting.defaultHash;t.toUploadImage.list.forEach(s=>{s.filename.isHashRename=o,t.hashRename(o,s)})}),ie(Y({},te(t)),{removeToUploadImage:n})}}),$o={key:0,class:"to-upload-image-list-card"},bo={class:"header"},Lo={key:0},So={key:0,class:"body"},Uo={class:"image-uploading-info-box"},ko={class:"left-image-box flex-center"},yo=["onClick"],wo=["src"],Bo={class:"right-operation-box"},Mo={class:"top"},Oo={class:"image-name"},Ro={class:"image-info"},To={class:"file-size item"},Go={class:"last-modified item"},Vo={key:0,class:"bottom rename-operation"},No={key:1,class:"bottom rename-operation"},Po={key:0,class:"el-icon-upload2"},zo={key:1,class:"el-icon-loading"},xo={key:2,class:"el-icon-check"},Ho=["onClick"],jo=i("i",{class:"el-icon-delete"},null,-1);function Xo(e,t,n,o,s,l){const u=E("selected-info-bar"),a=E("el-checkbox"),p=E("el-input"),c=E("copy-externalLink"),f=E("el-tooltip");return e.toUploadImage.list.length||e.userConfigInfo.selectedRepos?(d(),m("div",$o,[i("div",bo,[i("div",null,[g(u)]),i("div",null,[e.toUploadImage.list.length?(d(),m("span",Lo," \u5DF2\u4E0A\u4F20\uFF1A"+w(e.toUploadImage.uploadedNumber)+" / "+w(e.toUploadImage.list.length),1)):h("",!0)])]),e.toUploadImage.list.length?(d(),m("div",So,[i("ul",Uo,[(d(!0),m(N,null,x(e.toUploadImage.list,(r,L)=>(d(),m("li",{class:H(["image-uploading-info-item",{disable:e.loadingAllImage}]),key:L},[i("div",ko,[i("div",{class:"image-box",onClick:F=>e.imageViewer(r)},[i("img",{src:r.imgData.base64Url},null,8,wo)],8,yo)]),i("div",Bo,[i("div",Mo,[i("div",Oo,w(r.filename.now),1),i("div",Ro,[i("span",To,w(e.getFileSize(r.fileInfo.size)),1),i("span",Go,w(e.formatLastModified(r.fileInfo.lastModified)),1)])]),!r.uploadStatus.uploading&&r.uploadStatus.progress!==100?(d(),m("div",Vo,[g(a,{label:"\u54C8\u5E0C\u5316",modelValue:r.filename.isHashRename,"onUpdate:modelValue":F=>r.filename.isHashRename=F,onChange:F=>e.hashRename(F,r)},null,8,["modelValue","onUpdate:modelValue","onChange"]),g(a,{label:"\u91CD\u547D\u540D",modelValue:r.filename.isRename,"onUpdate:modelValue":F=>r.filename.isRename=F,onChange:F=>e.rename(F,r)},null,8,["modelValue","onUpdate:modelValue","onChange"]),r.filename.isRename?(d(),C(p,{key:0,class:"rename-input",size:"mini",modelValue:r.filename.newName,"onUpdate:modelValue":F=>r.filename.newName=F,onInput:F=>e.rename(F,r),clearable:""},null,8,["modelValue","onUpdate:modelValue","onInput"])):h("",!0)])):h("",!0),!r.uploadStatus.uploading&&r.uploadStatus.progress===100?(d(),m("div",No,[g(c,{"img-obj":r.uploadedImg},null,8,["img-obj"])])):h("",!0)]),i("div",{class:H(["upload-status-box",{"wait-upload":!r.uploadStatus.uploading&&r.uploadStatus.progress!==100,uploading:r.uploadStatus.uploading&&r.uploadStatus.progress!==100,uploaded:!r.uploadStatus.uploading&&r.uploadStatus.progress===100}])},[!r.uploadStatus.uploading&&r.uploadStatus.progress!==100?(d(),m("i",Po)):h("",!0),r.uploadStatus.uploading&&r.uploadStatus.progress!==100?(d(),m("i",zo)):h("",!0),!r.uploadStatus.uploading&&r.uploadStatus.progress===100?(d(),m("i",xo)):h("",!0)],2),r.uploadStatus.progress!==100&&!r.uploadStatus.uploading?(d(),m("div",{key:0,class:"remove-to-upload-image",onClick:F=>e.removeToUploadImage(r)},[g(f,{effect:"dark",content:"\u79FB\u9664",placement:"top"},{default:_(()=>[jo]),_:1})],8,Ho)):h("",!0)],2))),128))])])):h("",!0)])):h("",!0)}var Yo=U(Ao,[["render",Xo]]);const me=(e,t)=>e?ge(e.type)?new Promise(n=>{const o=new FileReader;o.readAsDataURL(e),o.onload=s=>{var a;const l=(a=s.target)==null?void 0:a.result,u=_e(l.length);u>=t?Ce.confirm(`\u5F53\u524D\u56FE\u7247 ${(u/1024).toFixed(2)} M\uFF0CCDN \u53EA\u80FD\u52A0\u901F\u5C0F\u4E8E 50 MB \u7684\u56FE\u7247\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7B2C\u4E09\u65B9\u5DE5\u5177 TinyPNG \u538B\u7F29`,"\u56FE\u7247\u8FC7\u5927\uFF0C\u7981\u6B62\u4E0A\u4F20",{confirmButtonText:"\u524D\u5F80 TinyPNG",cancelButtonText:"\u653E\u5F03\u4E0A\u4F20"}).then(()=>{window.open("https://tinypng.com/")}).catch(()=>{console.log("\u653E\u5F03\u4E0A\u4F20")}):n(l)}}):(y.error("\u8BE5\u6587\u4EF6\u4E0D\u662F\u56FE\u7247\u683C\u5F0F\uFF01"),null):null;var Jo=()=>({uuid:"",uploadStatus:{progress:0,uploading:!1},imgData:{base64Content:"",base64Url:""},fileInfo:{size:0,lastModified:0},filename:{name:"",hash:"",suffix:"",now:"",initName:"",newName:"xxx",isHashRename:!0,isRename:!1},externalLink:{github:"",cdn:"",markdown_gh:"",markdown_cdn:""}});const Wo=(e,t)=>e.clipboardData&&e.clipboardData.items?new Promise(n=>{var o;for(let s=0,l=e.clipboardData.items.length;s<l;s++){const u=e.clipboardData.items[s];if(u.kind==="file"){const a=u.getAsFile();(o=me(a,t))==null||o.then(p=>{n({base64:p,file:a})})}}}):null;const qo=S({name:"upload-area",props:{imageLoading:{type:Boolean,default:!1}},setup(){const e=V(),t=Q({userConfigInfo:$(()=>e.getters.getUserConfigInfo).value,uploadAreaActive:$(()=>e.getters.getUploadAreaActive),uploadSettings:$(()=>e.getters.getUploadSettings).value,toUploadImage:$(()=>e.getters.getToUploadImage).value,onSelect(n){var o;e.commit("CHANGE_UPLOAD_AREA_ACTIVE",!0);for(const s of n.target.files)(o=me(s,this.uploadSettings.imageMaxSize))==null||o.then(l=>{this.getImage(l,s)})},onDrop(n){var o;e.commit("CHANGE_UPLOAD_AREA_ACTIVE",!0);for(const s of n.dataTransfer.files)(o=me(s,this.uploadSettings.imageMaxSize))==null||o.then(l=>{this.getImage(l,s)})},async onPaste(n){const{base64:o,file:s}=await Wo(n,this.uploadSettings.imageMaxSize);this.getImage(o,s)},getImage(n,o){this.toUploadImage.list.length===this.toUploadImage.uploadedNumber&&this.toUploadImage.list.length>0&&this.toUploadImage.uploadedNumber>0&&(e.dispatch("TO_UPLOAD_IMAGE_CLEAN_LIST"),e.dispatch("TO_UPLOAD_IMAGE_CLEAN_UPLOADED_NUMBER"));const s=Jo();s.imgData.base64Url=n,s.imgData.base64Content=n.split(",")[1];const{name:l,hash:u,suffix:a}=fe(o.name);s.uuid=u,s.fileInfo.size=o.size,s.fileInfo.lastModified=o.lastModified,s.filename.name=l,s.filename.hash=u,s.filename.suffix=a,s.filename.now=this.userConfigInfo.personalSetting.defaultHash?`${l}.${u}.${a}`:`${l}.${a}`,s.filename.initName=l,s.filename.isHashRename=this.userConfigInfo.personalSetting.defaultHash,e.dispatch("TO_UPLOAD_IMAGE_LIST_ADD",JSON.parse(JSON.stringify(s))),e.dispatch("TO_UPLOAD_IMAGE_SET_CURRENT",{uuid:u,base64Url:n})}});return Y({},te(t))}}),Be=e=>(J("data-v-8a4aa962"),e=e(),W(),e),Ko={key:0,for:"uploader",class:"active-upload"},Zo={key:1,class:"tips active-upload"},Qo=Be(()=>i("i",{class:"icon el-icon-upload active-upload"},null,-1)),en=Be(()=>i("div",{class:"text active-upload"},"\u62D6\u62FD\u3001\u7C98\u8D34\u3001\u6216\u70B9\u51FB\u6B64\u5904\u4E0A\u4F20",-1)),tn=[Qo,en],on=["src"];function nn(e,t,n,o,s,l){const u=ue("loading");return z((d(),m("div",{class:H(["upload-area active-upload",{focus:e.uploadAreaActive}]),onDragover:t[1]||(t[1]=oe(()=>{},["prevent"])),onDrop:t[2]||(t[2]=oe((...a)=>e.onDrop&&e.onDrop(...a),["stop","prevent"])),onPaste:t[3]||(t[3]=(...a)=>e.onPaste&&e.onPaste(...a)),"element-loading-text":"\u56FE\u7247\u4E0A\u4F20\u4E2D...","element-loading-background":"rgba(0, 0, 0, 0.5)"},[e.uploadAreaActive?(d(),m("label",Ko)):h("",!0),i("input",{id:"uploader",type:"file",onChange:t[0]||(t[0]=(...a)=>e.onSelect&&e.onSelect(...a)),multiple:"multiple"},null,32),e.toUploadImage.curImgBase64Url?h("",!0):(d(),m("div",Zo,tn)),e.toUploadImage.curImgBase64Url?(d(),m("img",{key:2,class:"active-upload",src:e.toUploadImage.curImgBase64Url,alt:"Pictures to be uploaded"},null,8,on)):h("",!0)],34)),[[u,e.imageLoading]])}var sn=U(qo,[["render",nn],["__scopeId","data-v-8a4aa962"]]);const an={class:"upload-page-container"},un={key:0,class:"upload-page-left page-container",style:{width:"30%"}},ln={class:"row-item"},rn={class:"content-box"},dn={class:"row-item"},cn={class:"content-box"},pn={class:"row-item"},fn={class:"content-box",style:{"text-align":"right"}},gn=A("\u91CD\u7F6E "),_n=A("\u4E0A\u4F20 "),mn=S({setup(e){const t=V(),n=Z();O(null),O(null);const o=O(null),s=O(null),l=$(()=>t.getters.getUserConfigInfo),u=$(()=>t.getters.getUserLoggingStatus),a=$(()=>t.getters.getUploadedImageList),p=$(()=>t.getters.getToUploadImage),c=O(!1),f=()=>{const{token:L,selectedRepos:F,selectedDir:M}=l.value;if(!L){y.error("\u8BF7\u5148\u5B8C\u6210\u56FE\u5E8A\u914D\u7F6E\uFF01"),n.push("/config");return}if(!F){y.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4ED3\u5E93\uFF01"),n.push("/config");return}if(!M){y.error("\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),n.push("/config");return}if(p.value.list.length===0){y.error("\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}if(p.value.list.length===p.value.uploadedNumber){y.error("\u8BF7\u9009\u62E9\u8981\u4E0A\u4F20\u7684\u56FE\u7247\uFF01");return}c.value=!0,o.value.uploadImage_all(l.value).then(T=>{switch(T){case P.uploaded:case P.allUploaded:c.value=!1,t.dispatch("TO_UPLOAD_IMAGE_CLEAN_URL");break;case P.uploadFail:c.value=!1,t.dispatch("TO_UPLOAD_IMAGE_LIST_FAIL");break}}).catch(T=>{console.error("upload error: ",T),c.value=!1})},r=()=>{c.value=!1,t.dispatch("TO_UPLOAD_IMAGE_LOGOUT")};return ee(()=>u,L=>{!L&&r()}),(L,F)=>{const M=E("el-button");return d(),m("div",an,[b(a).length?(d(),m("div",un,[(d(!0),m(N,null,x(b(a),(T,I)=>(d(),m("div",{class:"uploaded-item",key:I},[g(Ue,{"image-obj":T,"is-uploaded":!0},null,8,["image-obj"])]))),128))])):h("",!0),i("div",{class:"upload-page-right page-container",style:Fe({width:b(a).length?"70%":"100%"})},[i("div",ln,[i("div",rn,[g(sn,{"image-loading":c.value,ref_key:"uploadAreaDom",ref:s},null,8,["image-loading"])])]),i("div",dn,[i("div",cn,[g(Yo,{ref_key:"toUploadImageCardDom",ref:o,"loading-all-image":c.value},null,8,["loading-all-image"])])]),i("div",pn,[i("div",fn,[b(p).list.length?(d(),C(M,{key:0,plain:"",size:"small",onClick:r},{default:_(()=>[gn]),_:1})):h("",!0),g(M,{type:"primary",plain:"",size:"small",onClick:f},{default:_(()=>[_n]),_:1})])])],4)])}}});var hn=U(mn,[["__scopeId","data-v-4e3fad11"]]);const In={class:"page-container management-page-container"},En={class:"content-container"},vn={class:"top"},Cn={class:"left"},Fn={class:"right flex-start"},Dn=["onClick"],An=["onClick"],$n={class:"bottom","element-loading-text":"\u52A0\u8F7D\u4E2D...","element-loading-background":"rgba(0, 0, 0, 0.5)"},bn={class:"image-list"},Ln=S({setup(e){const t=V(),n=Z(),o=$(()=>t.getters.getUserConfigInfo),s=$(()=>t.getters.getUserLoggingStatus),l=$(()=>t.getters.getDirImageList),u=O([]),a=O(!1),p=O(!1);function c(v){return o.value.dirList.some(D=>D.value===v)}function f(v,D){return{uuid:ke(),dir:D,name:v.name,path:v.path,sha:v.sha,github_url:j(k.gh,v,o.value),cdn_url:j(k.cdn,v,o.value),md_gh_url:j(k.md_gh,v,o.value),md_cdn_url:j(k.md_cdn,v,o.value),deleting:!1,is_transform_md:!1,size:v.size}}function r(v){a.value=!0;const D={dir:v,imageList:[]};R.get(`/repos/${o.value.owner}/${o.value.selectedRepos}/contents/${v}`).then(B=>{if(B&&B.status===200&&B.data.length>0){const ae=[];for(const K of B.data)K.type==="file"&&ge(fe(K.name).suffix)&&ae.push(f(K,v));D.imageList=ae,t.dispatch("DIR_IMAGE_LIST_ADD_IMAGE_LIST",D),a.value=!1}})}function L(v){const D=l.value.find(B=>B.dir===v);if(!D||!D.imageList.length){r(v);return}u.value=D.imageList}function F(){R.get(`/repos/${o.value.owner}/${o.value.selectedRepos}/contents`).then(v=>{if(console.log("[getReposContent] ",v),v&&v.status===200&&v.data.length>0){t.dispatch("DIR_IMAGE_LIST_ADD_DIR","/");for(const D of v.data)D.type==="dir"?t.dispatch("DIR_IMAGE_LIST_ADD_DIR",D.name):D.type==="file"&&ge(fe(D.name).suffix)&&t.dispatch("DIR_IMAGE_LIST_ADD_IMAGE",f(D,"/"));c(o.value.selectedDir)||(o.value.selectedDir="/"),L(o.value.selectedDir)}})}function M(){if(!l.value.length){F();return}const{selectedDir:v}=o.value,D=l.value.find(B=>B.dir===v);if(!D){c(v)&&r(v);return}D.imageList.length>0?u.value=D.imageList:r(v)}function T(){p.value=!p.value}function I(){t.dispatch("DIR_IMAGE_LOGOUT"),M()}return ne(()=>{M()}),ee(()=>s,v=>{v.value===!1&&n.push("/config")}),ee(()=>l,v=>{const D=v.value.find(B=>B.dir===o.value.selectedDir);D&&(u.value=D.imageList)},{deep:!0}),(v,D)=>{const B=E("el-tooltip"),ae=ue("loading");return d(),m("div",In,[i("div",En,[i("div",vn,[i("div",Cn,[g(we,{onSelectedDirChange:L})]),i("div",Fn,[g(B,{placement:"top",content:p.value?"\u5207\u6362\u65B9\u5757\u5C55\u793A":"\u5207\u6362\u5217\u8868\u5C55\u793A"},{default:_(()=>[i("i",{class:H(["btn-icon",p.value?"el-icon-tickets":"el-icon-menu"]),onClick:oe(T,["stop"])},null,10,Dn)]),_:1},8,["content"]),g(B,{placement:"top",content:"\u91CD\u65B0\u52A0\u8F7D\u56FE\u7247"},{default:_(()=>[i("i",{class:"btn-icon el-icon-refresh",onClick:oe(I,["stop"])},null,8,An)]),_:1})])]),z((d(),m("div",$n,[i("ul",bn,[(d(!0),m(N,null,x(u.value,(K,Te)=>(d(),m("li",{class:"image-item",key:Te,style:Fe({width:p.value?"50%":"230px",height:p.value?"80px":"240px"})},[g(Ue,{"image-obj":K,listing:p.value},null,8,["image-obj","listing"])],4))),128))])])),[[ae,a.value]])])])}}});var Sn=U(Ln,[["__scopeId","data-v-28b3ffc6"]]);const Un={class:"tutorials-step-1"},kn=A(" \u521B\u5EFA\u4E00\u4E2A\u7528\u6765\u5B58\u50A8\u56FE\u7247\u7684 "),yn=i("img",{src:"https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.j1486dtk68n.png",alt:"Create GitHub Repository"},null,-1),wn=S({setup(e){function t(){window.open("https://github.com/new")}return(n,o)=>(d(),m("div",Un,[i("h3",null,[kn,i("span",{class:"go-create-repo",onClick:t}," GitHub \u4ED3\u5E93")]),yn]))}});const Bn={class:"tutorials-step-2"},Mn=A(" \u521B\u5EFA\u4E00\u4E2A\u6709 repo \u6743\u9650\u7684 "),On=i("img",{src:"https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.lpt1xl9fu.png",alt:"Create GitHub Token"},null,-1),Rn=i("p",null,"\u7136\u540E\u70B9\u51FB Generate token \u6309\u94AE\uFF0C\u5373\u53EF\u751F\u6210\u4E00\u4E2Atoken\uFF0C\u5982\u4E0B\u56FE\uFF1A",-1),Tn=i("img",{src:"https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.pzmcp6b80fk.png",alt:"token-demo"},null,-1),Gn=i("p",{style:{color:"red"}},[i("em",null,"\u65B0\u751F\u6210\u7684 Token \u53EA\u4F1A\u663E\u793A\u4E00\u6B21\uFF0C\u8BF7\u59A5\u5584\u4FDD\u5B58\uFF01\u5982\u6709\u9057\u5931\uFF0C\u91CD\u65B0\u751F\u6210\u5373\u53EF\u3002")],-1),Vn=S({setup(e){function t(){window.open("https://github.com/settings/tokens/new")}return(n,o)=>(d(),m("div",Bn,[i("h3",null,[Mn,i("span",{class:"go-create-token",onClick:t}," GitHub Token")]),On,Rn,Tn,Gn]))}});const Nn={},Pn={class:"tutorials-step-3"},zn=_t('<h3>\u8FDB\u884C\u56FE\u5E8A\u914D\u7F6E\uFF08\u7ED1\u5B9A GitHub Token\u3001\u5B58\u50A8\u56FE\u7247\u7684\u4ED3\u5E93\u548C\u76EE\u5F55\uFF09</h3><p>1\u3001\u586B\u5199 Token\uFF0C\u81EA\u52A8\u83B7\u53D6\u8BE5\u7528\u6237\u4E0B\u7684\u4ED3\u5E93</p><img src="https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.4g8q5m7c8sq0.png"><br><p>2\u3001\u5728\u4ED3\u5E93\u7684\u4E0B\u62C9\u5217\u8868\u4E2D\uFF0C\u9009\u62E9\u4E00\u4E2A\u4F5C\u4E3A\u56FE\u5E8A\u7684\u4ED3\u5E93</p><img src="https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.746g75olruk0.png"><br><p>3\u3001\u9009\u62E9\u4E00\u79CD\u76EE\u5F55\u65B9\u5F0F\uFF08\u76EE\u5F55\u5373\u4ED3\u5E93\u91CC\u5B58\u653E\u56FE\u7247\u7684\u6587\u4EF6\u5939\uFF09</p><img src="https://cdn.jsdelivr.net/gh/XPoet/image-hosting@master/PicX/image.5ydmhgxjhgo0.png"><div class="dir-desc-box"><ul><li>\u65B0\u5EFA\u76EE\u5F55\uFF1A\u9700\u624B\u52A8\u8F93\u5165\u4E00\u4E2A\u65B0\u76EE\u5F55\u3002</li><li>\u6839\u76EE\u5F55\uFF1A\u56FE\u7247\u5C06\u76F4\u63A5\u5B58\u50A8\u5728\u4ED3\u5E93\u6839\u76EE\u5F55\u4E0B\u3002</li><li>\u81EA\u52A8\u76EE\u5F55\uFF1A\u81EA\u52A8\u751F\u6210\u65E5\u671F\u683C\u5F0F YYYYMMDD \u7684\u76EE\u5F55\u3002\u4F8B\u5982\uFF1A20200909</li><li>\u9009\u62E9\u4ED3\u5E93\u76EE\u5F55\uFF1A\u81EA\u52A8\u83B7\u53D6\u4ED3\u5E93\u4E0B\u6240\u6709\u76EE\u5F55\uFF0C\u9009\u62E9\u4E00\u4E2A\u5373\u53EF\u3002</li></ul></div>',10),xn=[zn];function Hn(e,t){return d(),m("div",Pn,xn)}var jn=U(Nn,[["render",Hn]]);const Xn=S({name:"tutorials",components:{Step1:wn,Step2:Vn,Step3:jn},setup(){const e=O(0);return{stepNum:e,step:n=>{n==="prev"&&(e.value<0?e.value=0:e.value-=1),n==="next"&&(e.value>3?e.value=3:e.value+=1)}}}}),Me=e=>(J("data-v-0cf85e03"),e=e(),W(),e),Yn={class:"page-container tutorials-page-container"},Jn={class:"step-content"},Wn={key:3},qn=Me(()=>i("h2",null,"\u{1F44D} \u606D\u559C\u4F60\u5B8C\u6210\u56FE\u5E8A\u4F7F\u7528\u6559\u7A0B \u{1F31F} \u5FEB\u53BB\u8BD5\u8BD5\u5427~",-1)),Kn=Me(()=>i("h2",null,"https://github.com/XPoet/picx",-1)),Zn=[qn,Kn],Qn={class:"btn-next-prev"},es=A("\u4E0A\u4E00\u6B65 "),ts=A("\u4E0B\u4E00\u6B65 ");function os(e,t,n,o,s,l){const u=E("el-step"),a=E("el-steps"),p=E("Step1"),c=E("Step2"),f=E("Step3"),r=E("el-button");return d(),m("div",Yn,[g(a,{active:e.stepNum,"finish-status":"success","align-center":""},{default:_(()=>[g(u,{title:"\u521B\u5EFA GitHub \u4ED3\u5E93"}),g(u,{title:"\u83B7\u53D6 GitHub Token"}),g(u,{title:"\u914D\u7F6E\u56FE\u5E8A"})]),_:1},8,["active"]),i("div",Jn,[e.stepNum===0?(d(),C(p,{key:0})):h("",!0),e.stepNum===1?(d(),C(c,{key:1})):h("",!0),e.stepNum===2?(d(),C(f,{key:2})):h("",!0),e.stepNum===3?(d(),m("div",Wn,Zn)):h("",!0)]),i("div",Qn,[e.stepNum>0?(d(),C(r,{key:0,type:"primary",onClick:t[0]||(t[0]=L=>e.step("prev"))},{default:_(()=>[es]),_:1})):h("",!0),e.stepNum<3?(d(),C(r,{key:1,type:"primary",onClick:t[1]||(t[1]=L=>e.step("next"))},{default:_(()=>[ts]),_:1})):h("",!0)])])}var ns=U(Xn,[["render",os],["__scopeId","data-v-0cf85e03"]]);const ss=e=>(J("data-v-42bf7110"),e=e(),W(),e),as={class:"page-container settings-page-container"},is=ss(()=>i("div",{class:"setting-title"},"\u4E2A\u6027\u8BBE\u7F6E\uFF1A",-1)),us={class:"setting-list"},ls={class:"setting-item"},rs={class:"setting-item"},ds=S({setup(e){const t=$(()=>re.getters.getUserConfigInfo).value,n=()=>{re.dispatch("USER_CONFIG_INFO_PERSIST")};return(o,s)=>{const l=E("el-switch");return d(),m("div",as,[is,i("ul",us,[i("li",ls,[g(l,{modelValue:b(t).personalSetting.defaultHash,"onUpdate:modelValue":s[0]||(s[0]=u=>b(t).personalSetting.defaultHash=u),onChange:n,"active-text":"\u4E0A\u4F20\u65F6\u9ED8\u8BA4\u7ED9\u56FE\u7247\u52A0\u4E0A\u54C8\u5E0C\u7801"},null,8,["modelValue"])]),i("li",rs,[g(l,{modelValue:b(t).personalSetting.defaultMarkdown,"onUpdate:modelValue":s[1]||(s[1]=u=>b(t).personalSetting.defaultMarkdown=u),onChange:n,"active-text":"\u4E0A\u4F20\u540E\u9ED8\u8BA4\u5F00\u542F Markdown \u683C\u5F0F\u7684\u5916\u94FE"},null,8,["modelValue"])])])])}}});var cs=U(ds,[["__scopeId","data-v-42bf7110"]]);const q=" | PicX \u56FE\u5E8A\u795E\u5668",ps=[{path:"/",name:"index",redirect:{name:"upload"}},{path:"/config",name:"config",component:jt,meta:{title:`\u56FE\u5E8A\u914D\u7F6E${q}`}},{path:"/upload",name:"upload",component:hn,meta:{title:`\u56FE\u7247\u4E0A\u4F20${q}`}},{path:"/management",name:"Management",component:Sn,meta:{title:`\u56FE\u5E8A\u7BA1\u7406${q}`}},{path:"/tutorials",name:"tutorials",component:ns,meta:{title:`\u4F7F\u7528\u6559\u7A0B${q}`}},{path:"/about",name:"about",component:()=>Dt(()=>import("./about.a91288ae.js"),["assets/about.a91288ae.js","assets/about.deca44c3.css","assets/vendor.4e90bbcf.js","assets/vendor.2e70b7de.css"]),meta:{title:`\u5E2E\u52A9\u53CD\u9988${q}`}},{path:"/settings",name:"settings",component:cs,meta:{title:`\u6211\u7684\u8BBE\u7F6E${q}`}}],Oe=mt({history:ht(),routes:ps});Oe.beforeEach((e,t,n)=>{e.meta.title&&(window.document.title=e.meta.title),n()});const fs=S({name:"site-count",props:{isuv:{type:Boolean,default:!1}},setup(){const e=O(null);return ne(()=>{const t=document.createElement("script");t.async=!0,t.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.value.appendChild(t)}),{siteCountDom:e}}}),gs={class:"site-count",ref:"siteCountDom"},_s={key:0,id:"busuanzi_value_site_uv"},ms={key:1,id:"busuanzi_value_site_pv"};function hs(e,t,n,o,s,l){return d(),m("span",gs,[e.isuv?(d(),m("span",_s)):h("",!0),e.isuv?h("",!0):(d(),m("span",ms))],512)}var Is=U(fs,[["render",hs]]),Es="./assets/logo.206d082d.png";const vs=S({name:"header-content",components:{siteCount:Is},setup(){const e=Z(),t=V(),n=Q({defaultUsername:"\u672A\u767B\u5F55",userConfigInfo:$(()=>t.state.userConfigInfoModule.userConfigInfo)}),o=()=>{!n.userConfigInfo.loggingStatus&&e.currentRoute.value.path!=="/config"&&e.push("/config")},s=()=>{t.dispatch("LOGOUT"),e.push("/config")},l=a=>{switch(a){case"upload":e.push("/");break;case"config":e.push("/config");break;case"management":e.push("/management");break;case"logout":s();break}},u=()=>{window.open("https://github.com/XPoet/picx")};return ie(Y({},te(n)),{router:e,onUserInfoClick:o,handleCommand:l,goGitHubRepo:u})}}),he=e=>(J("data-v-0f79d44f"),e=e(),W(),e),Cs={class:"header"},Fs={class:"header-left"},Ds=he(()=>i("div",{class:"logo"},[i("img",{src:Es,alt:"PicX"})],-1)),As=he(()=>i("div",{class:"title"},"PicX",-1)),$s=[Ds,As],bs={class:""},Ls=A(" \u6709 "),Ss=A(" \u4F4D\u5C0F\u4F19\u4F34\u4F7F\u7528 PicX \u56FE\u5E8A\u795E\u5668 "),Us={class:"header-right"},ks={class:"username"},ys={key:0,class:"avatar"},ws=he(()=>i("i",{class:"el-icon-user-solid"},null,-1)),Bs=[ws],Ms={class:"el-dropdown-link"},Os={class:"avatar"},Rs=["src","alt"],Ts=A(" \u9000\u51FA\u767B\u5F55 ");function Gs(e,t,n,o,s,l){var r,L;const u=E("site-count"),a=E("el-tooltip"),p=E("el-dropdown-item"),c=E("el-dropdown-menu"),f=E("el-dropdown");return d(),m("header",Cs,[i("div",Fs,[i("div",{class:"brand",onClick:t[0]||(t[0]=F=>e.router.push("/"))},$s),i("div",{class:"website-count",onClick:t[1]||(t[1]=(...F)=>e.goGitHubRepo&&e.goGitHubRepo(...F))},[g(a,{content:"\u524D\u5F80 GitHub \u70B9 Star \u652F\u6301\u4E00\u4E0B\u4F5C\u8005(*\uFFE3\uFE36\uFFE3)",placement:"bottom"},{default:_(()=>[i("i",bs,[Ls,g(u,{isuv:!1}),Ss])]),_:1})])]),i("div",Us,[i("div",{class:"user-info",onClick:t[2]||(t[2]=(...F)=>e.onUserInfoClick&&e.onUserInfoClick(...F))},[i("div",ks,w(e.userConfigInfo.owner?e.userConfigInfo.owner:e.defaultUsername),1),((r=e.userConfigInfo)==null?void 0:r.avatarUrl)?h("",!0):(d(),m("div",ys,Bs)),((L=e.userConfigInfo)==null?void 0:L.avatarUrl)?(d(),C(f,{key:1,trigger:"click",onCommand:e.handleCommand},{dropdown:_(()=>[g(c,null,{default:_(()=>[g(p,{command:"logout"},{default:_(()=>[Ts]),_:1})]),_:1})]),default:_(()=>{var F,M;return[i("span",Ms,[i("span",Os,[i("img",{src:(F=e.userConfigInfo)==null?void 0:F.avatarUrl,alt:(M=e.userConfigInfo)==null?void 0:M.owner},null,8,Rs)])])]}),_:1},8,["onCommand"])):h("",!0)])])])}var Vs=U(vs,[["render",Gs],["__scopeId","data-v-0f79d44f"]]);const Ns=S({name:"nav-content",setup(){const e=Z(),t=V(),n=Q({userConfigInfo:$(()=>t.getters.getUserConfigInfo).value,navList:[{name:"\u4E0A\u4F20\u56FE\u7247",icon:"el-icon-upload2",isActive:!1,path:"/upload"},{name:"\u56FE\u5E8A\u7BA1\u7406",icon:"el-icon-box",isActive:!1,path:"/management"},{name:"\u6211\u7684\u8BBE\u7F6E",icon:"el-icon-setting",isActive:!1,path:"/settings"}],navClick(s){const{path:l}=s;if(l==="/management"){if(this.userConfigInfo.selectedRepos===""){y.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4ED3\u5E93\uFF01"),e.push("/config");return}if(this.userConfigInfo.selectedDir===""){y.warning("\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),e.push("/config");return}}e.push(l)}}),o=s=>{n.navList.forEach(l=>{const u=l;return u.isActive=l.path===s,u})};return ee(()=>e.currentRoute.value,s=>{o(s.path)}),ne(()=>{e.isReady().then(()=>{o(e.currentRoute.value.path)})}),Y({},te(n))}}),Ps={class:"nav"},zs={class:"nav-list"},xs=["onClick"],Hs={class:"nav-content"},js={class:"nav-name"};function Xs(e,t,n,o,s,l){return d(),m("aside",Ps,[i("ul",zs,[(d(!0),m(N,null,x(e.navList,(u,a)=>z((d(),m("li",{class:H(["nav-item flex-center",{active:u.isActive}]),key:a,onClick:p=>e.navClick(u)},[i("div",Hs,[i("i",{class:H(["nav-icon",u.icon])},null,2),i("span",js,w(u.name),1)])],10,xs)),[[ve,u.path!=="/management"||e.userConfigInfo.loggingStatus]])),128))])])}var Ys=U(Ns,[["render",Xs],["__scopeId","data-v-3b74172e"]]);const Js={key:0,class:"image-box"},Ws=["src"],qs={key:0,class:"image-info"},Ks=S({setup(e){const t=V(),n=$(()=>t.getters.getImageViewer);function o(l){return`${_e(l)} KB`}function s(l){return le.formatTimestamp(l)}return(l,u)=>{var p,c,f,r;const a=E("el-tag");return d(),m("div",{class:H(["image-viewer",{active:b(n).isShow}]),onClick:u[0]||(u[0]=L=>b(n).isShow=!1)},[((c=(p=b(n))==null?void 0:p.imgInfo)==null?void 0:c.url)?(d(),m("div",Js,[i("img",{class:"img",src:(r=(f=b(n))==null?void 0:f.imgInfo)==null?void 0:r.url},null,8,Ws),b(n).imgInfo?(d(),m("div",qs,[b(n).imgInfo.name?(d(),C(a,{key:0,class:"item",size:"small"},{default:_(()=>[A(" \u56FE\u7247\u540D\uFF1A"+w(b(n).imgInfo.name),1)]),_:1})):h("",!0),b(n).imgInfo.size?(d(),C(a,{key:1,class:"item",size:"small"},{default:_(()=>[A(" \u56FE\u7247\u5927\u5C0F\uFF1A"+w(o(b(n).imgInfo.size)),1)]),_:1})):h("",!0),b(n).imgInfo.lastModified?(d(),C(a,{key:2,class:"item",size:"small"},{default:_(()=>[A(" \u6700\u540E\u4FEE\u6539\u65F6\u95F4\uFF1A"+w(s(b(n).imgInfo.lastModified)),1)]),_:1})):h("",!0)])):h("",!0)])):h("",!0)],2)}}});var Zs=U(Ks,[["__scopeId","data-v-03517e0e"]]);const Qs=S({name:"main-container",components:{headerContent:Vs,navContent:Ys,imageViewer:Zs},setup(){const e=V();return{changeUploadAreaActive:n=>{e.commit("CHANGE_UPLOAD_AREA_ACTIVE",n.target.classList.contains("active-upload"))}}}}),ea={class:"top"},ta={class:"bottom"},oa={class:"container"},na={class:"left"},sa={class:"right"},aa={class:"content"};function ia(e,t,n,o,s,l){const u=E("header-content"),a=E("nav-content"),p=E("router-view"),c=E("image-viewer");return d(),m(N,null,[i("main",{class:"main-container",onClick:t[0]||(t[0]=(...f)=>e.changeUploadAreaActive&&e.changeUploadAreaActive(...f))},[i("div",ea,[g(u)]),i("div",ta,[i("div",oa,[i("div",na,[g(a)]),i("div",sa,[i("div",aa,[g(p)])])])])]),g(c)],64)}var ua=U(Qs,[["render",ia],["__scopeId","data-v-348adbaa"]]);const la=S({name:"App",components:{mainContainer:ua}});function ra(e,t,n,o,s,l){const u=E("main-container");return d(),C(u)}var da=U(la,[["render",ra]]);const Re=It(da);vt(Re);Re.use(Oe).use(re,$e).mount("#app");export{U as _};
